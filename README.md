# Проект Bookify: Нагрузочное тестирование

Этот проект предназначен для выполнения нагрузочного тестирования веб-приложения Bookify с использованием инструментов Docker, Locust и Kafka. В рамках проекта как само приложение, так и имитированный API были разработаны вручную для обеспечения гибкости и точности тестирования.

## Цели проекта

- Определить максимальную пропускную способность сервиса.
- Проверить стабильность работы сервиса на протяжении длительного времени.
- Оценить производительность обработки и отправки сообщений в Kafka.

## Структура проекта

- **api/**: Содержит FastAPI-приложение `locust_mock.py` для имитации API сервиса бронирования.
- **docker/**: Содержит Dockerfile и docker-compose.yml для настройки окружения тестирования.
- **tests/**: Содержит сценарии нагрузочного тестирования, написанные с использованием Locust.
- **scripts/**: Вспомогательные скрипты для автоматизации запуска тестов и сбора метрик и проверок.

## Используемые инструменты

- **Docker**: Контейнеризация сервисов и имитация рабочей среды.
- **Locust**: Создание пользовательских сценариев нагрузки для тестирования.
- **Kafka**: Система передачи сообщений для тестирования асинхронной обработки данных.

## Мониторинг

- **Grafana** и **Prometheus**: Используются для сбора и визуализации метрик производительности во время тестирования.

## Запуск окружения

### Требования

- Docker и Docker Compose должны быть установлены на вашем компьютере.

### Шаги для запуска

1. Перейдите в директорию `docker/`:

   ```bash
   cd docker
   ```
2. Запустите Docker Compose для развертывания всех необходимых контейнеров
   
   ```bash
   docker-compose up -d --build
   ```
3. Проверьте статус контейнеров:
   
   ```bash
   docker-compose ps
   ```
   
### Нагрузочные испытания

#### Тесты

1. Тест на поиск максимальной нагрузки: Определяет предельный уровень нагрузки, при котором сервис остается производительным.
2. Тест стабильности: Проверяет стабильность работы сервиса на протяжении 12 часов.
3. Тест на отправку сообщений в Kafka: Оценивает производительность обработки и отправки сообщений в Kafka.

### Настройка и запуск тестов Locust

1. Убедитесь, что контейнеры mock, zookeeper и kafka запущены.
2. Перейдите в директорию tests/ и запустите Locust:
   
    ```bash
   locust -f locustfile.py --host=http://localhost:8000
   ```
    
4. Перейдите в веб-интерфейс Locust по адресу http://localhost:8089 и настройте параметры нагрузки.

### Сбор и анализ метрик

Используйте Grafana и Prometheus для сбора и визуализации метрик производительности во время тестирования.
   
### Отчетность

Отчет хранится в директории **/docs**.
