# Проект Bookify: Нагрузочное тестирование

Проект предназначен для выполнения нагрузочного тестирования веб-приложения Bookify с использованием инструментов Docker, Locust и Kafka. В рамках проекта как само приложение, так и имитированный API были разработаны вручную для обеспечения гибкости и точности тестирования.


## Структура проекта

### Директория `api/`

- **`locust_mock.py`**: FastAPI приложение, которое используется как мок-сервер для имитации API вашего сервиса. Этот сервер помогает тестировать производительность и устойчивость, обрабатывая запросы в сценариях нагрузочного тестирования.
- **`requirements.txt`**: Файл со списком всех зависимостей Python, необходимых для запуска FastAPI приложения и других компонентов тестирования.

### Директория `docker/`

- **`docker-compose.yml`**: Основной файл конфигурации Docker Compose, который описывает все контейнеры, их образы, зависимости и порты. Этот файл используется для развертывания и управления всеми контейнерами проекта.
- **`Dockerfile`**: Dockerfile для сборки образа `api-server`, который запускает FastAPI приложение (`locust_mock.py`).
- **`Dockerfile.locust`**: Dockerfile для сборки образа Locust, используемого для выполнения сценариев нагрузочного тестирования.
- **`Dockerfile.kafka-utils`**: Dockerfile для утилит Kafka, если такие потребуются для дополнительных настроек или тестов.
- **`prometheus/prometheus.yml`**: Конфигурационный файл Prometheus, который определяет источники данных (экспортеры метрик) и цели мониторинга.

### Директория `scripts/`

- **`assertions.py`**: Скрипт с пользовательскими проверками и утверждениями для тестов производительности. Этот файл можно использовать для добавления дополнительных проверок к стандартным сценариям тестирования.
- **`user_behavior.py`**: Определяет сценарии поведения пользователей для Locust. Этот файл описывает различные пользовательские действия, которые имитируются в ходе нагрузочного тестирования.

### Директория `tests/`

- **`max_test.py`**: Сценарий тестирования для определения максимальной пропускной способности сервиса. Используется вместе с Locust для запуска сценариев нагрузочного тестирования.

## Контейнеры в проекте

1. **Zookeeper**
   - **Образ:** `confluentinc/cp-zookeeper:latest`
   - **Назначение:** Управляет настройками и координацией Kafka.

2. **Kafka**
   - **Образ:** `confluentinc/cp-kafka:latest`
   - **Назначение:** Платформа для обмена сообщениями в реальном времени между сервисами.

3. **Node Exporter**
   - **Образ:** `prom/node-exporter:latest`
   - **Назначение:** Сбор системных метрик для Prometheus.

4. **Kafka Exporter**
   - **Образ:** `danielqsj/kafka-exporter:latest`
   - **Назначение:** Экспорт метрик Kafka для Prometheus.

5. **Prometheus**
   - **Образ:** `prom/prometheus:latest`
   - **Назначение:** Система мониторинга и оповещения.

6. **Grafana**
   - **Образ:** `grafana/grafana:latest`
   - **Назначение:** Визуализация данных мониторинга из Prometheus.

7. **API Server (api-server)**
   - **Образ:** `docker-api-server`
   - **Назначение:** FastAPI приложение для имитации API сервиса.

8. **Locust**
   - **Образ:** `docker-locust`
   - **Назначение:** Нагрузочное тестирование API сервиса.
